<body>
    <script>
        function until(conditionFunction) {

            const poll = resolve => {
            if(conditionFunction()) resolve();
            else setTimeout(_ => poll(resolve), 400);
        }

return new Promise(poll);
}
        async function API(url) {
            const Http = new XMLHttpRequest();
            Http.open("GET", url);
            Http.send();

            let alreadysent = false
            let value = ""

            Http.onreadystatechange = (e) => {
                if (Http.responseText == "") {
                
                } else if (alreadysent == false) {
                    alreadysent = true
                    value = JSON.parse(Http.responseText)
                }
            }

            await until(_ => alreadysent == true);
            console.log("Promise fulfilled")
            console.log(value)
            return value
            
        }
        console.log(API("https://theantidodoproject.vercel.app/api/data"))
    </script>
</body>